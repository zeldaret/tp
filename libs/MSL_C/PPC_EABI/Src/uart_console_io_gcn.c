//
// Generated By: dol2asm
// Translation Unit: PPC_EABI/Src/uart_console_io_gcn
//

#include "MSL_C/PPC_EABI/Src/uart_console_io_gcn.h"
#include "dol2asm.h"
#include "dolphin/types.h"

//
// Forward References:
//

int __close_console();
int __write_console(s32 arg0, s32 arg1, s32* arg2, s32 arg3);

//
// External References:
//

s32 OSGetConsoleType(void);
s32 InitializeUART(u32);
s32 WriteUARTN(s32, s32);
s32 __TRK_write_console(s32, s32, s32*, s32);

//
// Declarations:
//

/* 8036919C-803691A4 363ADC 0008+00 0/0 1/0 0/0 .text            __close_console */
int __close_console() {
    return 0;
}

/* 803691A4-80369274 363AE4 00D0+00 0/0 1/0 0/0 .text            __write_console */
int __write_console(s32 param_0, s32 param_1, s32* param_2, s32 param_3) {
    static int initialized;

	if ((OSGetConsoleType() & 0x20000000) == 0) {
		int uart_init = 0;
		if (initialized == FALSE) {
			uart_init = InitializeUART(0xE100);
			
			if (uart_init == 0) {
				initialized = 1;
			}
		}

		if (uart_init != 0) {
			return 1;
		}

		if (WriteUARTN(param_1, *param_2) != 0) {
			*param_2 = 0;
			return 1;
		}
	}

	__TRK_write_console(param_0, param_1, param_2, param_3);
	return 0;
}
