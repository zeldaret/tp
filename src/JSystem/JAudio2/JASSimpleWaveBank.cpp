//
// Generated By: dol2asm
// Translation Unit: JASSimpleWaveBank
//

#include "JSystem/JAudio2/JASSimpleWaveBank.h"

/* 80298C94-80298CF4 2935D4 0060+00 0/0 1/1 0/0 .text            __ct__17JASSimpleWaveBankFv */
JASSimpleWaveBank::JASSimpleWaveBank() {
    mWaveTable = NULL;
    mWaveTableSize = 0;
}

/* 80298CF4-80298D84 293634 0090+00 2/1 0/0 0/0 .text            __dt__17JASSimpleWaveBankFv */
JASSimpleWaveBank::~JASSimpleWaveBank() {
    delete[] mWaveTable;
}

/* 80298DE0-80298E60 293720 0080+00 0/0 1/1 0/0 .text
 * setWaveTableSize__17JASSimpleWaveBankFUlP7JKRHeap            */
void JASSimpleWaveBank::setWaveTableSize(u32 size, JKRHeap* heap) {
    delete[] mWaveTable;
    mWaveTable = new (heap, 0) TWaveHandle[size];
    mWaveTableSize = size;
}

/* 80298E60-80298E84 2937A0 0024+00 1/0 0/0 0/0 .text getWaveHandle__17JASSimpleWaveBankCFUl */
JASWaveHandle* JASSimpleWaveBank::getWaveHandle(u32 no) const {
    if (no >= mWaveTableSize) {
        return NULL;
    }
    return &mWaveTable[no];
}

/* 80298E84-80298F18 2937C4 0094+00 0/0 1/1 0/0 .text
 * setWaveInfo__17JASSimpleWaveBankFUlRC11JASWaveInfo           */
void JASSimpleWaveBank::setWaveInfo(u32 no, JASWaveInfo const& waveInfo) {
    mWaveTable[no].mWaveInfo = waveInfo;
    mWaveTable[no].mWaveInfo.field_0x20 = &_48;
    mWaveTable[no].mHeap = &mHeap;
}

/* 80298F18-80298F38 293858 0020+00 1/0 0/0 0/0 .text            getWaveArc__17JASSimpleWaveBankFUl
 */
JASWaveArc* JASSimpleWaveBank::getWaveArc(u32 no) {
    if (no != 0) {
        return NULL;
    }
    return this;
}

/* 80298F38-80298F5C 293878 0024+00 1/0 0/0 0/0 .text
 * getWavePtr__Q217JASSimpleWaveBank11TWaveHandleCFv            */
int JASSimpleWaveBank::TWaveHandle::getWavePtr() const {
    void* base = mHeap->getBase();
    if (base == NULL) {
        return NULL;
    }
    return (int)base + mWaveInfo.field_0x08;
}

/* 80298F5C-80298F90 29389C 0034+00 1/1 0/0 0/0 .text __ct__Q217JASSimpleWaveBank11TWaveHandleFv
 */
JASSimpleWaveBank::TWaveHandle::TWaveHandle() {
    mHeap = NULL;
}

/* 80298F90-80298F98 2938D0 0008+00 1/0 0/0 0/0 .text
 * getWaveInfo__Q217JASSimpleWaveBank11TWaveHandleCFv           */
const JASWaveInfo* JASSimpleWaveBank::TWaveHandle::getWaveInfo() const {
    return &mWaveInfo;
}

/* 80298F98-80298FA0 2938D8 0008+00 1/0 0/0 0/0 .text            getArcCount__17JASSimpleWaveBankCFv
 */
u32 JASSimpleWaveBank::getArcCount() const {
    return 1;
}
